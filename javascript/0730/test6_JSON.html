<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>test6_JSON.html</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    'use strict';
    // JSON.stringify() : 객체를 JSON 문서형식의 문자열로 변환
    let json = JSON.stringify(true);
    console.log("1.", json); // "true";
    console.log("");

    json = JSON.stringify(1234);
    console.log("2.", json); // "true";
    console.log("");

    json = JSON.stringify(['사과', '배', '바나나', true, 1234]  );
    console.log("3.", json); // "true";
    console.log("");

    const member = {
      name: "홍길동",
      age: "25",
      gender: true,
      address : '청주시 흥덕구',
      birthday: new Date(),
      atom: function() {
        console.log("성명 : ", member).name;
      }
    }
    console.log("4.member 객체", member); // "true";
    console.log("5.member 객체의 atom : ", member.atom); // "true";

    // javascript 객체를 JSON 문서형식의 문자열로 변환
    const jsonStr = JSON.stringify(member);
    console.log("6. jsonStr : ", jsonStr);
    console.log('');
    
    let json2 = JSON.stringify(member, (key, value) => {
      return key === 'name' ? '사용자' : value;
    });
    console.log("7. jsonStr : ", json2);

    // JSON 문서형식의 문자열을 javascript 객체로 변환
    let text = 
      '{"회원정보" : [' +
        '{"성":"홍", "이름":"길동"},' +
        '{"성":"김", "이름":"말숙"},' +
        '{"성":"이", "이름":"기자"},' +
        '{"성":"소", "이름":"나무"}'  +
      ']}';
    const jsObj = JSON.parse(text);
    console.log("8. jsObj : ", jsObj);

    console.log("9.jsObj[0] : ", jsObj.회원정보);
    console.log("9.jsObj[0] : ", jsObj.회원정보[0]);
    console.log("9.jsObj[0] : ", jsObj.회원정보[0].이름);

  </script>
</head>
<body>
  <p><br></p>
  <div class="container">
    <h3>JSON 자료 활용예제</h3>
    <h2>웹을 통한 자료의 전달 : XML, JSON</h2>
    <pre>
      JSON : JavaScript Object Notation의 약자
      키와 값의 쌍으로 이루어진 데이터 형식
      ==> 모바일(웹)에서 서버와 클라이언트 간의 데이터 전송방식에서 사용
      특징 : 프로그램의 종류나 플랫폼에 상관없이 사용 가능.(예: java , c, c++, c#, php, 코틀린, go언어...)
            처리방식은 객체를 string 형식으로 직렬화 처리 하여 전송한다.
            따라서 다시 사용하고자 한다면 JSON 문서형식을 javascript 객체로 변환하여 사용해야 한다.

      1.데이터 형식 ==> "key" : "value"
      2.객체 형식 ==> { "key" : "value", "key2" : "value2" }
      3.배열 형식 ==> [ "value1", "value2", "value3" ]
        {
          "회원정보" : [
            {"성":"홍", "이름":"길동"},
            {"성":"김", "이름":"말숙"},
            {"성":"이", "이름":"기자"},
            {"성":"소", "이름":"나무"}
          ]
        }
      4.JSON 문서 형식을 javascript 객체로 변환하는 방법
        let obj = JSON.parse(jsonString);  // jsonString : JSON 문서형식의 문자열
        stringify() : 객체를 JSON 문서형식의 문자열로 변환
        let jsonString = JSON.stringify(obj); // obj : javascript 객체
        
    </pre>
  </div>
</body>
</html>